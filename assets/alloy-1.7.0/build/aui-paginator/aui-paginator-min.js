AUI.add("aui-paginator",function(q){var k=q.Lang,J=k.isArray,T=k.isBoolean,t=k.isFunction,ak=k.isNumber,Z=k.isObject,l=k.isString,o=k.toInt,j="alwaysVisible",y="circular",c="container",af="containers",aa="content",ai="current",F=".",u="first",H="firstPageLinkLabel",W="last",ad="lastPageLinkLabel",M="link",I="maxPageLinks",C="next",d="nextPageLinkLabel",r="option",z="page",b="pageLinkContent",al="paginator",v="per",aj="prev",S="prevPageLinkLabel",K="report",n="rows",ah="rowsPerPage",p="rowsPerPageOptions",O="selected",a=" ",e="state",V="total",f="totalLabel",w="totalPages",N=function(){return Array.prototype.slice.call(arguments).join(a);},E=function(A){return(A instanceof q.NodeList);},i=q.getClassName,D=q.UA.ie,U=i(al),ag=i(al,c),m=i(al,aa),X=i(al,ai,z),ae=i(al,u,M),x=i(al,W,M),h=i(al,M),P=i(al,C,M),ac=i(al,z,c),s=i(al,z,M),ab=i(al,ai,z,K),B=i(al,aj,M),g=i(al,n,v,z),R=i(al,V),Y={defaultOutput:"{FirstPageLink} {PrevPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport} {Total} {RowsPerPageSelect}",firstLink:'<a href="#" class="'+N(h,ae)+'"></a>',lastLink:'<a href="#" class="'+N(h,x)+'"></a>',nextLink:'<a href="#" class="'+N(h,P)+'"></a>',pageContainer:"<span></span>",pageLink:'<a href="#"></a>',pageReport:'<span class="'+N(ab)+'"></span>',pageReportLabel:"({page} of {totalPages})",prevLink:'<a href="#" class="'+N(h,B)+'"></a>',rowsPerPage:'<select class="'+g+'"></select>',total:'<span class="'+N(R)+'"></span>',totalLabel:"(Total {total})"},an="&gt;",Q="&lt;",G=/selected(?:="")*/gi;var am=q.Component.create({NAME:al,TPL:Y,ATTRS:{alwaysVisible:{validator:T,value:true},circular:{validator:T,value:false},containers:{setter:function(L){var A=this;if(E(L)){return L;}else{if(l(L)){return q.all(L);}}return new q.NodeList([L]);},writeOnce:true},firstPageLinkLabel:{validator:l,value:u},lastPageLinkLabel:{validator:l,value:W},maxPageLinks:{getter:function(L){var A=this.get(w);return Math.min(A,L);},validator:ak,value:10},nextPageLinkLabel:{validator:l,value:N(C,an)},page:{setter:o,value:1},pageLinkContent:{validator:t,value:function(ao,A,L){ao.html(A);}},prevPageLinkLabel:{validator:l,value:N(Q,aj)},rowsPerPage:{setter:o,value:1},rowsPerPageOptions:{validator:J,value:[]},state:{getter:"_getState",setter:"_setState",validator:Z,value:{}},total:{setter:"_setTotal",validator:ak,value:0},totalLabel:{getter:function(){var A=this;return k.sub(A.configTpl.totalLabel,{total:A.get(V)});},validator:l},totalPages:{readOnly:true,getter:function(ap){var A=this;var ao=A.get(ah);var L=A.get(V);return Math.ceil(L/ao);}}},constructor:function(ao){var A=this;var L=ao.TPL||{};q.mix(L,am.TPL);A.configTpl=L;am.superclass.constructor.call(A,ao);},prototype:{lastState:null,templatesCache:null,renderUI:function(){var A=this;var L=A.get(af);L.unselectable();A._renderRowsPerPageOptions();A._renderTemplateUI();L.addClass(ag);},bindUI:function(){var A=this;A._delegateDOM();A.publish("changeRequest");A.after("stateChange",q.bind(A._afterSetState,A));A.before("stateChange",q.bind(A._beforeSetState,A));A.after("maxPageLinksChange",q.bind(A._renderTemplateUI,A));A.after("rowsPerPageChange",q.bind(A._renderTemplateUI,A));A.after("totalChange",q.bind(A._renderTemplateUI,A));},syncUI:function(){var A=this;A.changeRequest();},destructor:function(){var A=this;A.get(af).remove(true);},calculateRange:function(ap){var A=this;var at=A.get(I);var ao=A.get(w);var aq=Math.ceil(at/2);var ar=Math.min(Math.max(ap-aq,1),(ao-at+1));var L=Math.min(ar+at-1,ao);return{end:L,start:ar};},changeRequest:function(){var A=this;var ap=A.get(e);if(A.get(y)){var ao=ap.page;var L=ap.totalPages;if(ap.before&&(ap.before.page==ao)){if(ao<=1){ap.page=L;}else{if(ao>=L){ap.page=1;}}A.set(e,ap);}}A.fire("changeRequest",{state:ap});},eachContainer:function(L){var A=this;A.get(af).each(function(ao){if(ao){L.apply(A,arguments);}});},hasNextPage:function(){var A=this;var L=A.get(z)+1;return A.hasPage(L);},hasPage:function(ao){var A=this;var L=A.get(w);return((ao>0)&&(ao<=L));},hasPrevPage:function(){var A=this;var L=A.get(z)-1;return A.hasPage(L);},setState:function(L){var A=this;A.set(e,L);},_afterSetState:function(L){var A=this;A._syncPageLinksUI();A._syncPageReportUI();},_beforeSetState:function(L){var A=this;A.lastState=L.prevVal;},_bindDOMEvents:function(){var A=this;var L=A.get(ah);A.eachContainer(function(ap){var ao=ap.one(F+g);if(ao){ao.val(L);ao.detach("change");ao.on("change",function(aq){try{L=aq.target.val();}catch(ar){}A.set(z,1);A.set(ah,L);A.changeRequest();});}});},_createNode:function(ao,L){var A=this;var ap=q.Node.create(ao);if(L){ap.html(L);}return ap;},_delegateDOM:function(){var A=this;A.eachContainer(function(ao,L){ao.delegate("click",q.bind(A._onClickFirstLinkEl,A),F+ae);ao.delegate("click",q.bind(A._onClickLastLinkEl,A),F+x);ao.delegate("click",q.bind(A._onClickNextLinkEl,A),F+P);ao.delegate("click",q.bind(A._onClickPageLinkEl,A),F+s);ao.delegate("click",q.bind(A._onClickPrevLinkEl,A),F+B);});},_getState:function(L){var A=this;return{before:A.lastState,page:A.get(z),paginator:A,rowsPerPage:A.get(ah),total:A.get(V),totalPages:A.get(w)};},_getTemplate:function(aB){var aG=this;var ar=0;var ax=N(h,s);var aE=aG.configTpl;var A=aG.get(I);var az=aE.pageLink;var L=aG._rowsPerPageEl;var ay=aG._createNode(aE.firstLink,aG.get(H));var at=aG._createNode(aE.lastLink,aG.get(ad));var aw=aG._createNode(aE.nextLink,aG.get(d));var aF=aG._createNode(aE.pageContainer);var ao=aG._createNode(aE.pageReport,aG._pageReportLabel);var aD=aG._createNode(aE.prevLink,aG.get(S));var au=aG._createNode(aE.total,aG.get(f));aF.addClass(ac);while(ar++<A){var aA=aG._createNode(az);aA.addClass(ax);aF.append(aA);}var aC;if(L){var ap=L.all(r);aC=L.outerHTML();if(D){aC=aC.replace(G,"");var av=aG.get(ah);var aq='value="'+av+'"';if(D<9){aq="value="+av;}aC=aC.replace(new RegExp(aq),aq+" selected");}}aG.templates=k.sub(aB,{CurrentPageReport:ao.outerHTML(),FirstPageLink:ay.outerHTML(),LastPageLink:at.outerHTML(),NextPageLink:aw.outerHTML(),PageLinks:aF.outerHTML(),PrevPageLink:aD.outerHTML(),RowsPerPageSelect:aC,Total:au.outerHTML()});
return aG.templates;},_onClickFirstLinkEl:function(L){var A=this;A.set(z,1);A.changeRequest();L.halt();},_onClickLastLinkEl:function(ao){var A=this;var L=A.get(w);A.set(z,L);A.changeRequest();ao.halt();},_onClickNextLinkEl:function(ao){var A=this;var ap=A.get(z);var L=A.hasNextPage()?ap+1:ap;A.set(z,L);A.changeRequest();ao.halt();},_onClickPageLinkEl:function(ao){var A=this;var L=ao.currentTarget.attr(z);A.set(z,L);A.changeRequest();ao.halt();},_onClickPrevLinkEl:function(ao){var A=this;var ap=A.get(z);var L=(A.hasPrevPage()?ap-1:ap);A.set(z,L);A.changeRequest();ao.halt();},_renderRowsPerPageOptions:function(){var A=this;var ar=A.get(ah);var at=A.get(p);var aq=A.configTpl.rowsPerPage;var L=A._createNode(aq);var ao=L.all(r);L.addClass(g);ao.removeAttribute(O);var ap=ao.filter("[value="+ar+"]");if(ap){ap.setAttribute(O,O);}q.each(at,function(aw,av,ax){var au=L.getDOM();au.options[av]=new Option(aw,aw);});A._rowsPerPageEl=L;},_renderTemplateUI:function(){var A=this;var L=A.get(af);A._getTemplate(A.configTpl.defaultOutput);L.html(A.templates);A._syncPageLinksUI();A._syncPageReportUI();A._bindDOMEvents();},_setState:function(L){var A=this;q.each(L,function(ap,ao){A.set(ao,ap);});return L;},_setTotal:function(ap){var A=this;var L=A.get(j);var ao=A.get(ah);var aq=(L||(ap!==0&&ap>ao));A.get(af).toggle(aq);return ap;},_syncPageLinksUI:function(){var A=this;var ao=A.get(z);var L=A.calculateRange(ao);A.get(af).each(function(ar){var aq=0;var ap=L.start;var av=ar.all(F+s);if(av.size()){av.removeClass(X);while(ap<=L.end){var au=A.get(b);var at=av.item(aq);au.apply(A,[at,ap,aq]);at.setAttribute(z,ap);if(ap==ao){at.addClass(X);}aq++;ap++;}}});},_syncPageReportUI:function(L){var A=this;A._pageReportLabel=k.sub(A.configTpl.pageReportLabel,{page:A.get(z),totalPages:A.get(w)});A.get(af).each(function(ao){var ap=ao.one(F+ab);if(ap){ap.html(A._pageReportLabel);}});}}});q.Paginator=am;},"1.7.0",{requires:["aui-base"],skinnable:true});